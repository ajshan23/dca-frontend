import{r as o,j as t}from"./index-rIFH6k4g.js";import{D as v}from"./DataTable-DH1c_1Gx.js";import{v as f,B as j}from"./index-Ctcp45-r.js";import{u as l}from"./useQuery-Cvu5mUxz.js";import{b as y,o as b}from"./ProductService-FAH52uD-.js";import{B as w,S as D}from"./index-B_X9YUzt.js";import{B as c}from"./Button-BLsb7UDu.js";import"./Alert-BXvaanNu.js";import"./index-D1zb3KDM.js";import{a as A}from"./Upload-ilZw4A4N.js";import"./Card-CATgrbVU.js";import"./index-CwOsvrDI.js";import"./Drawer-BSW7APxh.js";import"./index-CXy5gsdO.js";import"./hoist-non-react-statics.cjs-Dh4Amu6n.js";import"./index-R-HYP-jI.js";import"./ScrollBar-Uobvb02Y.js";import{A as S}from"./AdaptableCard-OR56gPxM.js";import"./Views-N-kQq2tB.js";import"./chart.config-CXiB16oc.js";import"./SvgIcon-D9ZKD9-w.js";import"./toString-DUfzYozp.js";import"./proxy-Dq6k2qqt.js";import"./CloseButton-DwbG0elL.js";import"./_getPrototype-BHi8KFZ3.js";import"./index-Chjiymov.js";import"./cloneDeep-DJN0yfLA.js";import"./useThemeClass-CM6GtMXp.js";const ee=()=>{const[i,m]=o.useState("active"),[a,d]=o.useState({}),{data:r,isLoading:g,refetch:u}=l({queryKey:["active-assignments"],queryFn:y,enabled:i==="active"}),{data:s,isLoading:x,refetch:p}=l({queryKey:["assignment-history",a],queryFn:()=>{var e,n;return b({fromDate:(e=a.startDate)==null?void 0:e.toISOString(),toDate:(n=a.endDate)==null?void 0:n.toISOString()})},enabled:i==="history"}),h=o.useMemo(()=>[{header:"Product",cell:e=>t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.row.original.product.name}),t.jsx("p",{className:"text-sm text-gray-500",children:e.row.original.product.serialNumber})]})},{header:"Employee",cell:e=>t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:e.row.original.employee.name}),t.jsx("p",{className:"text-sm text-gray-500",children:e.row.original.employee.empId})]})},{header:"Details",cell:e=>t.jsxs("div",{children:[t.jsxs("p",{children:["Assigned: ",new Date(e.row.original.assignedAt).toLocaleDateString()]}),e.row.original.expectedReturnAt&&t.jsxs("p",{children:["Expected Return: ",new Date(e.row.original.expectedReturnAt).toLocaleDateString()]}),e.row.original.returnedAt&&t.jsxs("p",{children:["Returned: ",new Date(e.row.original.returnedAt).toLocaleDateString()]})]})},{header:"Status",cell:e=>t.jsx(w,{className:e.row.original.status==="assigned"?"bg-blue-500":e.row.original.status==="returned"?"bg-green-500":e.row.original.status==="lost"?"bg-red-500":"bg-amber-500",children:e.row.original.status})},{header:"Actions",cell:e=>t.jsx(c,{size:"xs",icon:t.jsx(f,{}),onClick:()=>{}})}],[]);return t.jsxs(S,{className:"h-full",bodyClass:"h-full",children:[t.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"mb-4 lg:mb-0",children:"Product Assignments"}),t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[t.jsx(D,{className:"lg:w-40",value:{value:i,label:i==="active"?"Active":"History"},options:[{value:"active",label:"Active"},{value:"history",label:"History"}],onChange:e=>m(e.value)}),i==="history"&&t.jsx(A.RangePicker,{value:[a.startDate,a.endDate],onChange:e=>d({startDate:(e==null?void 0:e[0])||void 0,endDate:(e==null?void 0:e[1])||void 0})}),t.jsx(c,{icon:t.jsx(j,{}),onClick:i==="active"?u:p})]})]}),t.jsx(v,{columns:h,data:i==="active"?(r==null?void 0:r.data)||[]:(s==null?void 0:s.data)||[],loading:i==="active"?g:x})]})};export{ee as default};
